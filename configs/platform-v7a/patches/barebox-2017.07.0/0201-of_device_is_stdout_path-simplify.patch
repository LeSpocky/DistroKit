From: =?UTF-8?q?Uwe=20Kleine-K=C3=B6nig?= <u.kleine-koenig@pengutronix.de>
Date: Wed, 14 Jun 2017 13:26:30 +0200
Subject: [PATCH] of_device_is_stdout_path: simplify
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Test for dev->device_node being NULL earlier which at the end of the
function allows to simplify the calculation of the return value

Signed-off-by: Uwe Kleine-KÃ¶nig <u.kleine-koenig@pengutronix.de>
Forwarded: id:20170614113110.21604-1-u.kleine-koenig@pengutronix.de
---
 drivers/of/base.c | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

diff --git a/drivers/of/base.c b/drivers/of/base.c
index 9f89c7864475..4241ee189cc5 100644
--- a/drivers/of/base.c
+++ b/drivers/of/base.c
@@ -2018,6 +2018,9 @@ int of_device_is_stdout_path(struct device_d *dev)
 	struct device_node *dn;
 	const char *name;
 
+	if (!dev->device_node)
+		return 0;
+
 	name = of_get_property(of_chosen, "stdout-path", NULL);
 	if (!name)
 		name = of_get_property(of_chosen, "linux,stdout-path", NULL);
@@ -2026,13 +2029,8 @@ int of_device_is_stdout_path(struct device_d *dev)
 		return 0;
 
 	dn = of_find_node_by_path(name);
-	if (!dn)
-		return 0;
 
-	if (dn == dev->device_node)
-		return 1;
-
-	return 0;
+	return dn == dev->device_node;
 }
 
 /**
